"use strict";

let moment = require("moment");
let getPeriods = require("../index.js");

describe("get periods", function () {
    it("should return expected periods with max granularity = year", function (done) {
        let dateFrom = "2017-05-21";
        let dateTo = "2019-06-13";

        let expectedData = { day:
                [ '2017-05-21',
                    '2017-05-22',
                    '2017-05-23',
                    '2017-05-24',
                    '2017-05-25',
                    '2017-05-26',
                    '2017-05-27',
                    '2017-05-28',
                    '2017-05-29',
                    '2017-05-30',
                    '2017-05-31',
                    '2019-06-01',
                    '2019-06-02',
                    '2019-06-03',
                    '2019-06-04',
                    '2019-06-05',
                    '2019-06-06',
                    '2019-06-07',
                    '2019-06-08',
                    '2019-06-09',
                    '2019-06-10',
                    '2019-06-11',
                    '2019-06-12',
                    '2019-06-13' ],
            month: [ '2017-06', '2019-01', '2019-02', '2019-03', '2019-04', '2019-05' ],
            half_year: [ '2017-2-half-year' ],
            year: [ '2018' ] };

        getPeriods(dateFrom, dateTo).should.be.eql(expectedData);
        done();
    });
    it("should return expected periods with max granularity = month", function (done) {
        let dateFrom = "2017-05-21";
        let dateTo = "2019-06-13";

        let expectedData = { day:
                [ '2017-05-21',
                    '2017-05-22',
                    '2017-05-23',
                    '2017-05-24',
                    '2017-05-25',
                    '2017-05-26',
                    '2017-05-27',
                    '2017-05-28',
                    '2017-05-29',
                    '2017-05-30',
                    '2017-05-31',
                    '2019-06-01',
                    '2019-06-02',
                    '2019-06-03',
                    '2019-06-04',
                    '2019-06-05',
                    '2019-06-06',
                    '2019-06-07',
                    '2019-06-08',
                    '2019-06-09',
                    '2019-06-10',
                    '2019-06-11',
                    '2019-06-12',
                    '2019-06-13' ],
            month:
                [ '2017-06',
                    '2017-07',
                    '2017-08',
                    '2017-09',
                    '2017-10',
                    '2017-11',
                    '2017-12',
                    '2018-01',
                    '2018-02',
                    '2018-03',
                    '2018-04',
                    '2018-05',
                    '2018-06',
                    '2018-07',
                    '2018-08',
                    '2018-09',
                    '2018-10',
                    '2018-11',
                    '2018-12',
                    '2019-01',
                    '2019-02',
                    '2019-03',
                    '2019-04',
                    '2019-05' ] };

        getPeriods(dateFrom, dateTo, "month").should.be.eql(expectedData);
        done();
    });
});
let dateFrom = "2017-05-21";
let dateTo = "2019-06-13";
console.log(getPeriods(dateFrom, dateTo, "half_year"))